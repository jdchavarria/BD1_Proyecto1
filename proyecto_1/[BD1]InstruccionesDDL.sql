/*CREACION DEL MODELO RELACIONAL CREACION DE TABLAS*/

CREATE TABLE TITULO(
id_titulo INTEGER generated by default as identity PRIMARY KEY,
nombre VARCHAR2(40) CONSTRAINT NN_NO_TI NOT NULL
);


CREATE TABLE EMPLEADO(
id_empleado INTEGER generated by default as identity PRIMARY KEY,
nombre VARCHAR2(40) CONSTRAINT NN_NOMBRE NOT NULL,
apellido VARCHAR2(40) CONSTRAINT NN_APE NOT NULL,
direccion VARCHAR2(40),
telefono VARCHAR2(40),
fecha_nacimiento DATE CONSTRAINT NN_FECHA NOT NULL,
genero VARCHAR2(1) CONSTRAINT CK_GENERO CHECK (genero IN('M','F')),
id_titulo INTEGER,
CONSTRAINT FK_TITULO FOREIGN KEY(id_titulo) REFERENCES TITULO(id_titulo)  ON DELETE CASCADE
);

CREATE TABLE PACIENTE(
id_paciente INTEGER generated by default as identity PRIMARY KEY,
nombre VARCHAR2(40) CONSTRAINT NN_NOMBRE_PA NOT NULL,
apellido VARCHAR2(40) CONSTRAINT NN_APE_PA NOT NULL,
direccion VARCHAR2(40),
telefono VARCHAR2(40),
fecha_nacimiento DATE CONSTRAINT NN_FECHA_PA NOT NULL,
genero VARCHAR2(1) CONSTRAINT CK_GENERO_PA CHECK (genero IN('M','F')),
peso NUMBER,
altura NUMBER
);

CREATE TABLE TRATAMIENTO(
id_tratamiento INTEGER generated by default as identity PRIMARY KEY,
nombre VARCHAR2(40) CONSTRAINT NN_NO_TRA NOT NULL
);

CREATE TABLE DIAGNOSTICO(
id_diagnostico INTEGER generated by default as identity PRIMARY KEY,
nombre VARCHAR2(40) CONSTRAINT NN_NO_DIA NOT NULL
);


CREATE TABLE SINTOMA(
id_sintoma INTEGER generated by default as identity PRIMARY KEY,
nombre VARCHAR2(40) CONSTRAINT NN_NO_SIN NOT NULL
);


CREATE TABLE EVALUACION(
id_evaluacion INTEGER generated by default as identity PRIMARY KEY,
fecha DATE CONSTRAINT NN_FE NOT NULL,
id_paciente INTEGER CONSTRAINT NN_PA NOT NULL,
id_empleado INTEGER CONSTRAINT NN_EM NOT NULL,
CONSTRAINT FK_PACIENTE FOREIGN KEY(id_paciente) REFERENCES PACIENTE(id_paciente) ON DELETE CASCADE,
CONSTRAINT FK_EMPLEADO FOREIGN KEY(id_empleado) REFERENCES EMPLEADO(id_empleado) ON DELETE CASCADE
);

CREATE TABLE PACIENTE_TRATAMIENTO(
id_pac_tra INTEGER generated by default as identity PRIMARY KEY,
fecha date CONSTRAINT NN_FE_TRA NOT NULL,
id_paciente INTEGER CONSTRAINT NN_PAC NOT NULL,
id_tratamiento INTEGER CONSTRAINT NN_TRATA NOT NULL,
CONSTRAINT FK_PACIENTE_TR FOREIGN KEY(id_paciente) REFERENCES PACIENTE(id_paciente) ON DELETE CASCADE,
CONSTRAINT FK_TRA_TRA FOREIGN KEY(id_tratamiento) REFERENCES TRATAMIENTO(id_tratamiento) ON DELETE CASCADE
);


CREATE TABLE EVALUACION_SINTOMA(
id_evua_sintoma INTEGER generated by default as identity PRIMARY KEY,
id_evaluacion INTEGER CONSTRAINT NN_EVA NOT NULL,
id_sintoma INTEGER CONSTRAINT NN_SINTO NOT NULL,
CONSTRAINT FK_EVUA FOREIGN KEY(id_evaluacion) REFERENCES EVALUACION(id_evaluacion) ON DELETE CASCADE,
CONSTRAINT FK_SINTOMA FOREIGN KEY(id_sintoma) REFERENCES SINTOMA(id_sintoma) ON DELETE CASCADE
);

CREATE TABLE DIAGNOSTICO_SINTOMA(
id_diag_sintoma INTEGER generated by default as identity PRIMARY KEY,
rango NUMBER,
id_diagnostico INTEGER CONSTRAINT NN_DIAG NOT NULL,
id_sintoma INTEGER CONSTRAINT NN_SIN_D NOT NULL,
CONSTRAINT FK_D FOREIGN KEY(id_diagnostico) REFERENCES DIAGNOSTICO(id_diagnostico) ON DELETE CASCADE,
CONSTRAINT FK_S FOREIGN KEY(id_sintoma) REFERENCES SINTOMA(id_sintoma) ON DELETE CASCADE
);